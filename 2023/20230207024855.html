<!doctype html><html lang=zh-hans><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta content="yes" name=apple-mobile-web-app-capable><meta content="black-translucent" name=apple-mobile-web-app-status-bar-style><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>史上最全Remark42评论系统安装教程 | 奥国天空</title>
<meta property="og:title" content="史上最全Remark42评论系统安装教程 - 奥国天空"><meta property="og:type" content="article"><meta property="article:published_time" content='2023-02-07T02:48:55+08:00'><meta property="article:modified_time" content='2023-02-07T02:48:55+08:00'><meta name=Keywords content><meta name=description content="史上最全Remark42评论系统安装教程"><meta name=author content><meta property="og:url" content="https://matteo.eu.org/2023/20230207024855.html"><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/icons/favicon-apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/icons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/icons/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=stylesheet type=text/css href=/css/style.css><link rel=stylesheet type=text/css href=/css/friendly.css><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css><script type=text/javascript src=//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js></script></head><body><div id=body_container class=body_container><main id=main class=main_container><div id=header><div class=site-name><h1 class=hidden>奥国天空</h1><a id=logo href=/.>奥国天空</a><p class=description>Matteo's Daily Life and Reflections</p></div><div id=nav-menu><a class=current href=https://matteo.eu.org/><i class="fa fa-home">首页</i></a>
<a href=https://matteo.eu.org/categories.html title=分类><i class='fa fa-folder'></i><span>分类</span></a>
<a href=https://matteo.eu.org/tags.html title=标签><i class='fa fa-tag'></i><span>标签</span></a>
<a href=https://matteo.eu.org/archives.html title=归档><i class='fa fa-archive'></i><span>归档</span></a></div></div><div class=content_container><div class=toc-article><h2 class=toc-title>文章目录</h2><div class=toc-content><nav id=TableOfContents><ol><li><a href=#一-remark42介绍>一. Remark42介绍</a><ol><li><a href=#11-功能>1.1 功能</a></li><li><a href=#12-注重隐私>1.2 注重隐私</a></li></ol></li><li><a href=#二-安装>二. 安装</a><ol><li><a href=#21-前提条件>2.1 前提条件</a></li><li><a href=#22-安装remark42>2.2 安装remark42</a></li><li><a href=#23-安装ssl证书支持https>2.3 安装SSL证书支持https</a><ol><li><a href=#231-申请ssl证书>2.3.1 申请ssl证书</a></li><li><a href=#232-修改nginx的配置文件>2.3.2. 修改nginx的配置文件</a></li></ol></li></ol></li><li><a href=#三-remark42-前端配置>三. Remark42 前端配置</a></li><li><a href=#四-remark42-服务端配置>四. Remark42 服务端配置</a><ol><li><a href=#41-实现开机自启动>4.1 实现开机自启动</a></li><li><a href=#42-邮箱登录和第三方应用登录>4.2 邮箱登录和第三方应用登录</a><ol><li><a href=#421-匿名登录>4.2.1 匿名登录</a></li><li><a href=#422-github-登录>4.2.2 Github 登录</a></li><li><a href=#423-twitter-登录>4.2.3 Twitter 登录</a></li><li><a href=#424-google-登录>4.2.4 Google 登录</a></li><li><a href=#425-email-登录>4.2.5 Email 登录</a></li><li><a href=#426-teletram-登录>4.2.6 Teletram 登录</a></li></ol></li></ol></li><li><a href=#五-一些高级使用技巧>五. 一些高级使用技巧</a><ol><li><a href=#51-ssl证书自动续期>5.1 SSL证书自动续期</a></li><li><a href=#52-实现开机自启动>5.2 实现开机自启动</a></li><li><a href=#53-多网站共用一个remark42系统>5.3 多网站共用一个Remark42系统</a><ol><li><a href=#531-步骤一>5.3.1 步骤一</a></li><li><a href=#532-步骤二>5.3.2 步骤二</a></li></ol></li><li><a href=#54-管理评论>5.4 管理评论</a></li><li><a href=#55-备份和恢复>5.5 备份和恢复</a><ol><li><a href=#551-备份数据>5.5.1 备份数据</a></li><li><a href=#552-恢复数据>5.5.2 恢复数据</a></li></ol></li></ol></li></ol></nav></div></div><script type=text/javascript>var postToc=document.querySelector(".toc-article");if(postToc){const e=postToc.getBoundingClientRect().top;window.addEventListener("scroll",function(){var t=document.documentElement.scrollTop,t=t<188?0:t-188;postToc.style.top=t+e+"px"})}document.querySelector("#TableOfContents").children.length<1&&document.querySelector(".toc-article").remove()</script><article class=post><header><h1 class=post-title>史上最全Remark42评论系统安装教程</h1></header><time datetime=2023-02-07T01:48:55Z class="post-meta meta-date dt-published">2023年2月7日</time><div class=post-meta><span>&nbsp;|</span>
<a href=/categories/it%E4%B8%96%E7%95%8C target=_blank>③IT世界</a>
<a href=/categories/blog%E7%9B%B8%E5%85%B3 target=_blank>Blog相关</a></div><div class=clear style=display:none><div class=toc-article><div class=toc-title>文章目录</div></div></div><div class=post-content><h2 id=一-remark42介绍>一. Remark42介绍</h2><p>Remark42是一个开源的、轻量级、强大的评论系统。</p><p><a href=https://github.com/umputun/remark42>Remark在Github上的源代码</a></p><h3 id=11-功能>1.1 功能</h3><ul><li>支持 Markdown emoji</li><li>支持匿名、邮箱登录</li><li>支持各种OAuth，如GitHub、Google、Facebook、Twitter、Yandex、</li><li>颜值也不错，支持浅色和深色模式，带有树和普通演示文稿的多层嵌套评论</li><li>支持数据迁移，可以导入Disqus和WordPress的评论数据</li><li>强大的管理功能，管理员可以置顶、删除评论和用户禁言</li><li>支持投票，个人标示和验证</li><li>支持多种评论排序</li><li>图片可以可视化导入</li><li>支持最近的评论</li><li>支持RSS</li><li>支持通知</li><li>支持手动备份和自动备份，支持备份数据恢复</li><li>没有数据库，存储使用单一文件</li><li>支持Docker的部署</li><li>支持Linux, Windows和MacOS系统</li><li>一套评论系统可以用于多个网站</li><li>支持HTTPS的访问</li></ul><h3 id=12-注重隐私>1.2 注重隐私</h3><p><a href=https://www.7benshu.com/post/2019/11/3/>以下注重隐私说明摘自拉斐</a></p><ul><li>Remark42试图对任何私有或半私有信息非常敏感。</li><li>身份验证从身份验证提供程序请求最小可能的范围。他们返回的所有额外信息将立即丢弃，并且不会以任何形式存储。</li><li>通常，remark42仅保留用户ID，用户名和头像链接。这些字段均不直接公开-标识和名称进行了- 哈希处理，并附加了头像。</li><li>没有任何形式的跟踪。</li><li>登录技工使用存储在cookie（httpOnly，安全）中的JWT。第二个cookie（XSRF_TOKEN）是防止CSRF的随机ID。</li><li>没有跨站点登录，即无法在运行remark42的独立站点之间分析用户的行为。</li><li>不涉及第三方分析服务。</li><li>用户可以要求remark42知道的所有信息并导出到gz文件。</li><li>支持彻底清除与用户活动有关的所有信息。</li><li>Cookie的寿命可以限制为仅会话。</li><li>由remark42存储的所有潜在敏感数据都经过哈希处理和加密。</li></ul><h2 id=二-安装>二. 安装</h2><h3 id=21-前提条件>2.1 前提条件</h3><ul><li>有一个独立IP的服务器</li><li>有一个域名，并把这域名绑定到上面ip，假定域名为: <strong>remark42.sample.com</strong></li></ul><h3 id=22-安装remark42>2.2 安装remark42</h3><p>官方提供了两种安装方式，一种是Docker，一种是二进制，这里采用二进制方式，服务器要求低一些。</p><p>以下程序在Debian服务器上操作。</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-tex data-lang=tex><span class=line><span class=cl>sudo -i
</span></span><span class=line><span class=cl>wget https://github.com/umputun/remark42/releases/download/v1.11.3/remark42.linux-386.tar.gz
</span></span><span class=line><span class=cl>tar -xvf remark42.linux-386.tar.gz
</span></span><span class=line><span class=cl>mv remark42.linux-386 /usr/local/bin
</span></span><span class=line><span class=cl>/usr/local/bin/remark42.linux-386 server --secret=12345 --url=http://127.0.0.1:8080
</span></span></code></pre></td></tr></table></div></div></div><p>这时候打开 <a href=http://remark42.sample.com:8080/web>http://remark42.sample.com:8080/web</a> ，应该显示如下</p><p><img class=mx-auto alt=remrk42安装成功 src=https://raw.githubusercontent.com/lthcweb/BlogImg/main/gp/202302071314600.webp></p><p>如果显示上面的图片，说明已经安装成功了，安装详情见<a href=https://remark42.com/docs/getting-started/installation/>官网</a></p><p>安装很简单，但是还不能用，存在两个重要的问题：</p><ol><li>没有SSL，不支持https</li><li>不支持通过Google，Facebook，GitHub和Yandex进行社交登录，也不能邮箱登录，什么作用都没有。<br>下面来解决这两个问题</li></ol><h3 id=23-安装ssl证书支持https>2.3 安装SSL证书支持https</h3><h4 id=231-申请ssl证书>2.3.1 申请ssl证书</h4><p>免费ssl证书一般在<a href=https://letsencrypt.org/zh-cn/>Let&rsquo;s Encrypt</a>申请，是一个免费、开放和自动化的证书颁发机构。<br>我们用 ACME 来申请。</p><ol><li>切换到root状态，安装并停止nginx。</li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-tex data-lang=tex><span class=line><span class=cl>apt install nginx
</span></span><span class=line><span class=cl>systemctl stop nginx
</span></span></code></pre></td></tr></table></div></div></div><ol start=2><li>安装socat</li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-tex data-lang=tex><span class=line><span class=cl>apt -y install net-tools socat
</span></span></code></pre></td></tr></table></div></div></div><ol start=3><li>安装ACME</li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-tex data-lang=tex><span class=line><span class=cl>curl  https://get.acme.sh | sh
</span></span></code></pre></td></tr></table></div></div></div><p>安装程序会做以下操作：</p><ul><li><p>自动把 acme.sh 安装到 home 的.acme.sh目录下，即~/.acme.sh/</p></li><li><p>自动创建一个 bash 的 alias, 方便你的使用: alias acme.sh=~/.acme.sh/acme.sh</p></li><li><p>自动为你创建 cronjob, 每天 0:00 点自动检测所有的证书, 如果快过期了, 需要更新, 则会自动更新证书.</p></li></ul><ol start=4><li>更改默认证书</li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-tex data-lang=tex><span class=line><span class=cl>~/.acme.sh/acme.sh --set-default-ca --server letsencrypt
</span></span></code></pre></td></tr></table></div></div></div><p>acme被ZeroSSL收购，其默认的证书方式为ZeroSSL，但此证书生成时会携带邮箱，因此更换为letsencrypt。</p><p>当然，也可以在生成证书时加一个&ndash;server参数来决定生成什么证书</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-tex data-lang=tex><span class=line><span class=cl>--server letsencrypt
</span></span></code></pre></td></tr></table></div></div></div><ol start=5><li>生成证书，同时验证域名所有权</li></ol><p>使用acme.sh &ndash;issue命令生成证书，同时会验证域名的所有权。 acme.sh 有两种方式验证：http 和 dns 验证。</p><p>验证域名的方法有多种，这里采用自建虚拟webserver的http验证方式，要求服务器没有占用80端口，这也是上面停止nginx的原因。</p><p>如果服务器已有80端口的服务，不建议使用自建虚拟webserver，此方式续租时略麻烦需要改造。</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>~/.acme.sh/acme.sh --issue -d remark2.sample.com --standalone
</span></span></code></pre></td></tr></table></div></div></div><p><img class=mx-auto alt=生成并验证证书 src=https://raw.githubusercontent.com/lthcweb/BlogImg/main/gp/202302071402099.webp></p><p>注意：如果需要生成泛域名（*.a.com）的证书，不能使用HTTP认证域名，需要改用DNS认证的方式。</p><ol start=6><li>copy/安装 证书</li></ol><p>默认生成的证书都放在安装目录下: ~/.acme.sh/，但是不要在web服务器中直接引用目录下的证书文件，也不要手动拷贝证书文件到具体的web服务器中，手动拷贝会导致以后不能自动更新证书。</p><p>正确方式是使用acme.sh的命令安装证书，acme.sh会自动拷贝证书文件到具体目录中，且记录下来，以后自动更新证书时也会执行此拷贝步骤，从而实现更新证书的完全自动化。</p><p>命令格式如下：</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-tex data-lang=tex><span class=line><span class=cl>acme.sh --install-cert -d xxx <span class=k>\</span>
</span></span><span class=line><span class=cl>  --cert-file xxx <span class=k>\</span>
</span></span><span class=line><span class=cl>  --key-file xxx <span class=k>\</span>
</span></span><span class=line><span class=cl>  --fullchain-file xxx<span class=k>\</span>
</span></span></code></pre></td></tr></table></div></div></div><p>根据实际情况填入对应的参数，以nginx为例：</p><ul><li>创建安装证书的位置目录</li></ul><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>mkdir /etc/nginx/cert_file
</span></span></code></pre></td></tr></table></div></div></div><ul><li>安装证书</li></ul><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>~/.acme.sh/acme.sh --installcert -d remark42.sample.com \
</span></span><span class=line><span class=cl>  --key-file   /etc/nginx/cert_file/key.pem  \
</span></span><span class=line><span class=cl>  --fullchain-file /etc/nginx/cert_file/fullchain.pem
</span></span></code></pre></td></tr></table></div></div></div><h4 id=232-修改nginx的配置文件>2.3.2. 修改nginx的配置文件</h4><ol><li>查看nginx配置文件位置</li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>nginx -t
</span></span></code></pre></td></tr></table></div></div></div><p><img class=mx-auto alt=nginx配置文件位置 src=https://raw.githubusercontent.com/lthcweb/BlogImg/main/gp/202302071428099.webp></p><ul><li>查看nginx配置文件</li></ul><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>cat /etc/nginx/nginx.conf
</span></span></code></pre></td></tr></table></div></div></div><p><img class=mx-auto alt=nginx配置文件 src=https://raw.githubusercontent.com/lthcweb/BlogImg/main/gp/202302071439319.webp></p><ol start=2><li>修改nginx配置文件</li></ol><p>修改红框位置中的文件，这里修改<code>/etc/nginx/sites-enabled/default</code>, 用<a href=https://remark42.com/docs/manuals/nginx/>Remark42官网</a> 给出的格式替换。</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>server</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>listen</span>      <span class=mi>443</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>server_name</span> <span class=n>remark42</span><span class=o>.</span><span class=n>sample</span><span class=o>.</span><span class=n>com</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>ssl</span>    <span class=n>on</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>ssl_certificate</span>        <span class=o>/</span><span class=n>etc</span><span class=o>/</span><span class=n>nginx</span><span class=o>/</span><span class=n>cert_file</span><span class=o>/</span><span class=n>fullchain</span><span class=o>.</span><span class=n>pem</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>ssl_certificate_key</span>    <span class=o>/</span><span class=n>etc</span><span class=o>/</span><span class=n>nginx</span><span class=o>/</span><span class=n>cert_file</span><span class=o>/</span><span class=n>key</span><span class=o>.</span><span class=n>pem</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>gzip</span> <span class=n>on</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>gzip_types</span> <span class=n>text</span><span class=o>/</span><span class=n>plain</span> <span class=n>application</span><span class=o>/</span><span class=n>json</span> <span class=n>text</span><span class=o>/</span><span class=n>css</span> <span class=n>application</span><span class=o>/</span><span class=n>javascript</span> <span class=n>application</span><span class=o>/</span><span class=n>x</span><span class=o>-</span><span class=n>javascript</span> <span class=n>text</span><span class=o>/</span><span class=n>javascript</span> <span class=n>text</span><span class=o>/</span><span class=n>xml</span> <span class=n>application</span><span class=o>/</span><span class=n>xml</span> <span class=n>application</span><span class=o>/</span><span class=n>rss</span><span class=o>+</span><span class=n>xml</span> <span class=n>application</span><span class=o>/</span><span class=n>atom</span><span class=o>+</span><span class=n>xml</span> <span class=n>application</span><span class=o>/</span><span class=n>rdf</span><span class=o>+</span><span class=n>xml</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>gzip_min_length</span> <span class=mi>1000</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>gzip_proxied</span> <span class=n>any</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>location</span> <span class=o>~</span> <span class=o>/</span>\<span class=o>.</span><span class=n>git</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>deny</span> <span class=n>all</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>location</span> <span class=o>/</span><span class=n>index</span><span class=o>.</span><span class=n>html</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>         <span class=n>proxy_redirect</span>          <span class=n>off</span><span class=p>;</span>
</span></span><span class=line><span class=cl>         <span class=n>proxy_set_header</span>        <span class=n>X</span><span class=o>-</span><span class=n>Real</span><span class=o>-</span><span class=ne>IP</span> <span class=o>$</span><span class=n>remote_addr</span><span class=p>;</span>
</span></span><span class=line><span class=cl>         <span class=n>proxy_set_header</span>        <span class=n>X</span><span class=o>-</span><span class=n>Forwarded</span><span class=o>-</span><span class=n>For</span> <span class=o>$</span><span class=n>proxy_add_x_forwarded_for</span><span class=p>;</span>
</span></span><span class=line><span class=cl>         <span class=n>proxy_set_header</span>        <span class=n>Host</span> <span class=o>$</span><span class=n>http_host</span><span class=p>;</span>
</span></span><span class=line><span class=cl>         <span class=n>proxy_pass</span>              <span class=n>http</span><span class=p>:</span><span class=o>//</span><span class=n>remark42</span><span class=o>.</span><span class=n>sample</span><span class=o>.</span><span class=n>com</span><span class=p>:</span><span class=mi>8080</span><span class=o>/</span><span class=n>web</span><span class=o>/</span><span class=n>index</span><span class=o>.</span><span class=n>html</span><span class=p>;</span>
</span></span><span class=line><span class=cl>     <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>location</span> <span class=o>/</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>         <span class=n>proxy_redirect</span>          <span class=n>off</span><span class=p>;</span>
</span></span><span class=line><span class=cl>         <span class=n>proxy_set_header</span>        <span class=n>X</span><span class=o>-</span><span class=n>Real</span><span class=o>-</span><span class=ne>IP</span> <span class=o>$</span><span class=n>remote_addr</span><span class=p>;</span>
</span></span><span class=line><span class=cl>         <span class=n>proxy_set_header</span>        <span class=n>X</span><span class=o>-</span><span class=n>Forwarded</span><span class=o>-</span><span class=n>For</span> <span class=o>$</span><span class=n>proxy_add_x_forwarded_for</span><span class=p>;</span>
</span></span><span class=line><span class=cl>         <span class=n>proxy_set_header</span>        <span class=n>Host</span> <span class=o>$</span><span class=n>http_host</span><span class=p>;</span>
</span></span><span class=line><span class=cl>         <span class=n>proxy_pass</span>              <span class=n>http</span><span class=p>:</span><span class=o>//</span><span class=n>remark42</span><span class=o>.</span><span class=n>sample</span><span class=o>.</span><span class=n>com</span><span class=p>:</span><span class=mi>8080</span><span class=o>/</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>access_log</span>   <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=nb>log</span><span class=o>/</span><span class=n>nginx</span><span class=o>/</span><span class=n>remark42</span><span class=o>.</span><span class=n>log</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>server</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>listen</span> <span class=mi>80</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>server_name</span> <span class=n>remark2</span><span class=o>.</span><span class=n>sample</span><span class=o>.</span><span class=n>com</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span>      <span class=mi>301</span> <span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>remark42</span><span class=o>.</span><span class=n>sample</span><span class=o>.</span><span class=n>com</span><span class=o>$</span><span class=n>request_uri</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></div><ol><li>启动nginx 和 remark42</li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>systemctl start nginx
</span></span><span class=line><span class=cl>exit # 退出root模式，remark42只需要用户模式
</span></span><span class=line><span class=cl>./remark42 server --secret=12345 --url=http://127.0.0.1:8080
</span></span></code></pre></td></tr></table></div></div></div><p>这时候打开 <a href="https://remark42.sample.com/web/%EF%BC%8C==%E4%B8%8D%E9%9C%80%E8%A6%818080%E7%AB%AF%E5%8F%A3%E5%8F%B7==%EF%BC%8C%E5%B0%B1%E8%83%BD%E7%9C%8B%E5%88%B0">https://remark42.sample.com/web/，==不需要8080端口号==，就能看到</a>：</p><p><img class=mx-auto alt=remrk42安装成功 src=https://raw.githubusercontent.com/lthcweb/BlogImg/main/gp/202302071314600.webp></p><p>这时候还能打开 <a href=http://remark42.sample.com:8080/web/>http://remark42.sample.com:8080/web/</a> ，不过已经不需要了，可以在服务器关闭http流量。</p><h2 id=三-remark42-前端配置>三. Remark42 前端配置</h2><ol><li>把以下代码嵌入到需要显示评论的地方</li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;div id=&#34;remark42&#34;&gt;&lt;/div&gt;
</span></span></code></pre></td></tr></table></div></div></div><ol start=2><li>在适当位置添加以下初始化脚本，如footer之类的地方，和上面代码放一起也行。</li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>&lt;</span><span class=n>script</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=k>var</span> <span class=n>remark_config</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>host</span><span class=p>:</span> <span class=s1>&#39;https://remark42.sample.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>&lt;/</span><span class=n>script</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=n>script</span><span class=o>&gt;!</span><span class=n>function</span><span class=p>(</span><span class=n>e</span><span class=p>,</span><span class=n>n</span><span class=p>){</span><span class=k>for</span><span class=p>(</span><span class=k>var</span> <span class=n>o</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>o</span><span class=o>&lt;</span><span class=n>e</span><span class=o>.</span><span class=n>length</span><span class=p>;</span><span class=n>o</span><span class=o>++</span><span class=p>){</span><span class=k>var</span> <span class=n>r</span><span class=o>=</span><span class=n>n</span><span class=o>.</span><span class=n>createElement</span><span class=p>(</span><span class=s2>&#34;script&#34;</span><span class=p>),</span><span class=n>c</span><span class=o>=</span><span class=s2>&#34;.js&#34;</span><span class=p>,</span><span class=n>d</span><span class=o>=</span><span class=n>n</span><span class=o>.</span><span class=n>head</span><span class=o>||</span><span class=n>n</span><span class=o>.</span><span class=n>body</span><span class=p>;</span><span class=s2>&#34;noModule&#34;</span><span class=ow>in</span> <span class=n>r</span><span class=err>?</span><span class=p>(</span><span class=n>r</span><span class=o>.</span><span class=n>type</span><span class=o>=</span><span class=s2>&#34;module&#34;</span><span class=p>,</span><span class=n>c</span><span class=o>=</span><span class=s2>&#34;.mjs&#34;</span><span class=p>):</span><span class=n>r</span><span class=o>.</span><span class=n>async</span><span class=o>=!</span><span class=mi>0</span><span class=p>,</span><span class=n>r</span><span class=o>.</span><span class=n>defer</span><span class=o>=!</span><span class=mi>0</span><span class=p>,</span><span class=n>r</span><span class=o>.</span><span class=n>src</span><span class=o>=</span><span class=n>remark_config</span><span class=o>.</span><span class=n>host</span><span class=o>+</span><span class=s2>&#34;/web/&#34;</span><span class=o>+</span><span class=n>e</span><span class=p>[</span><span class=n>o</span><span class=p>]</span><span class=o>+</span><span class=n>c</span><span class=p>,</span><span class=n>d</span><span class=o>.</span><span class=n>appendChild</span><span class=p>(</span><span class=n>r</span><span class=p>)}}(</span><span class=n>remark_config</span><span class=o>.</span><span class=n>components</span><span class=o>||</span><span class=p>[</span><span class=s2>&#34;embed&#34;</span><span class=p>],</span><span class=n>document</span><span class=p>);</span><span class=o>&lt;/</span><span class=n>script</span><span class=o>&gt;</span>
</span></span></code></pre></td></tr></table></div></div></div><p>详细配置在这里 <a href=https://remark42.com/docs/configuration/frontend/>Remark42前端详细配置</a></p><h2 id=四-remark42-服务端配置>四. Remark42 服务端配置</h2><h3 id=41-实现开机自启动>4.1 实现开机自启动</h3><p>我们需要用系统服务来实现开机自启动，方法如下：</p><ol><li>建立系统用户 remark42</li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>useradd -r remark42
</span></span></code></pre></td></tr></table></div></div></div><ol start=2><li>建立服务目录</li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>mkdir</span> <span class=o>-</span><span class=n>m</span> <span class=mi>770</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>www</span><span class=o>/</span><span class=n>remark42</span>
</span></span><span class=line><span class=cl><span class=n>chown</span> <span class=p>:</span><span class=n>remark42</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>www</span><span class=o>/</span><span class=n>remark42</span>
</span></span></code></pre></td></tr></table></div></div></div><ol start=3><li>建立环境配置文件</li></ol><p>注意 <code>SECRET</code> ==不能使用特殊字符==，只能使用大小写字母和数字。</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>vim</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>www</span><span class=o>/</span><span class=n>remark42</span><span class=o>/</span><span class=n>remark42</span><span class=o>.</span><span class=n>conf</span>
</span></span></code></pre></td></tr></table></div></div></div><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>REMARK_URL=https://remark42.sample.com
</span></span><span class=line><span class=cl>SECRET=some_secret_key_phrase_1234
</span></span><span class=line><span class=cl>SITE=sample
</span></span><span class=line><span class=cl>AUTH_ANON=true
</span></span><span class=line><span class=cl>EMOJI=true
</span></span></code></pre></td></tr></table></div></div></div><p><code>AUTH_ANON=true</code> 将允许匿名访问和留言。</p><ol start=4><li>建立系统服务</li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vim /etc/systemd/system/remark42.service
</span></span></code></pre></td></tr></table></div></div></div><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=p>[</span><span class=n>Unit</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>Description</span><span class=o>=</span><span class=n>remark42</span> <span class=n>comment</span> <span class=n>engine</span>
</span></span><span class=line><span class=cl><span class=n>After</span><span class=o>=</span><span class=n>network</span><span class=o>.</span><span class=n>target</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=n>Service</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>User</span><span class=o>=</span><span class=n>remark42</span>
</span></span><span class=line><span class=cl><span class=n>Group</span><span class=o>=</span><span class=n>remark42</span>
</span></span><span class=line><span class=cl><span class=n>EnvironmentFile</span><span class=o>=/</span><span class=k>var</span><span class=o>/</span><span class=n>www</span><span class=o>/</span><span class=n>remark42</span><span class=o>/</span><span class=n>remark42</span><span class=o>.</span><span class=n>conf</span>
</span></span><span class=line><span class=cl><span class=n>WorkingDirectory</span><span class=o>=/</span><span class=k>var</span><span class=o>/</span><span class=n>www</span><span class=o>/</span><span class=n>remark42</span>
</span></span><span class=line><span class=cl><span class=n>Restart</span><span class=o>=</span><span class=n>always</span>
</span></span><span class=line><span class=cl><span class=n>RestartSec</span><span class=o>=</span><span class=mi>5</span>
</span></span><span class=line><span class=cl><span class=n>ExecStart</span><span class=o>=/</span><span class=n>usr</span><span class=o>/</span><span class=n>local</span><span class=o>/</span><span class=n>bin</span><span class=o>/</span><span class=n>remark42</span><span class=o>.</span><span class=n>linux</span><span class=o>-</span><span class=mi>386</span> <span class=n>server</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=n>Install</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>WantedBy</span><span class=o>=</span><span class=n>multi</span><span class=o>-</span><span class=n>user</span><span class=o>.</span><span class=n>target</span>
</span></span></code></pre></td></tr></table></div></div></div><ol start=5><li>激活和启动系统服务</li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>systemctl enable --now remark42
</span></span></code></pre></td></tr></table></div></div></div><h3 id=42-邮箱登录和第三方应用登录>4.2 邮箱登录和第三方应用登录</h3><p>如Github, Google, Telegram, Twitter &mldr;.</p><h4 id=421-匿名登录>4.2.1 匿名登录</h4><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>AUTH_ANON=true
</span></span></code></pre></td></tr></table></div></div></div><h4 id=422-github-登录>4.2.2 Github 登录</h4><ol><li><p>在 &ldquo;<strong>OAuth App</strong>&rdquo;: <a href=https://github.com/settings/developers>https://github.com/settings/developers</a></p></li><li><p>点击 &ldquo;<strong>New OAuth App</strong>&rdquo;</p></li><li><p>输入 &ldquo;<strong>Application Name</strong>&rdquo; 和 &ldquo;<strong>Homepage URL</strong>&rdquo;<br>Homepage URL里填上面的域名，如 <a href=https://remark42.sample.com>https://remark42.sample.com</a></p></li><li><p>在"<strong>Authorization callback URL</strong>" 按 域名 + /auth/github/callback 的格式输入, <a href=https://remark42.sample.com/auth/github/callback>https://remark42.sample.com/auth/github/callback</a></p></li><li><p>点击 &ldquo;<strong>Register application</strong>"，得到"Client ID"和 &ldquo;Client secrets&rdquo;，填入上面的配置文件 /var/www/remark42/remark42.conf</p></li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>vim</span> <span class=o>/</span><span class=k>var</span><span class=o>/</span><span class=n>www</span><span class=o>/</span><span class=n>remark42</span><span class=o>/</span><span class=n>remark42</span><span class=o>.</span><span class=n>conf</span>
</span></span></code></pre></td></tr></table></div></div></div><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>AUTH_GITHUB_CID=120c550d7e13****************
</span></span><span class=line><span class=cl>AUTH_GITHUB_CSEC=107e234ee97b10269be7e40dc84ae26e********
</span></span></code></pre></td></tr></table></div></div></div><h4 id=423-twitter-登录>4.2.3 Twitter 登录</h4><ol><li>在 &ldquo;<strong>OAuth App</strong>&rdquo;: <a href=https://developer.twitter.com/en/apps>https://developer.twitter.com/en/apps</a></li><li>点击 &ldquo;<strong>Create an App</strong>&rdquo; ，填写 App Name</li><li>记录好 API Key、API Key Secret 和 Bearer Token</li><li>在 &ldquo;<strong>Dashboard</strong>&rdquo; - &ldquo;<strong>User authentication settings</strong>"，点击 &ldquo;<strong>Set up</strong>&rdquo;</li><li>&mldr;后面没记</li><li>最后在 Dashboard 里，点击Project App的名字，在 &ldquo;<strong>Consumer Keys</strong>&ldquo;处点击&rdquo;<strong>Regenerate</strong>"，就生成了API Key and Secret，填入上面的配置文件。</li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>AUTH_TWITTER_CID=bTuOD2ZmCKWvQiOil********
</span></span><span class=line><span class=cl>AUTH_TWITTER_CSEC=4J2VC53Uu4z4qSF2DIUWfsu22Mg7dvu6LJ0pQ6VO4P********
</span></span></code></pre></td></tr></table></div></div></div><h4 id=424-google-登录>4.2.4 Google 登录</h4><p>Google登录按<a href=https://remark42.com/docs/configuration/authorization/>官网教程</a> 操作。</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>AUTH_GOOGLE_CID=*********************.apps.googleusercontent.com
</span></span><span class=line><span class=cl>AUTH_GOOGLE_CSEC=******************
</span></span></code></pre></td></tr></table></div></div></div><h4 id=425-email-登录>4.2.5 Email 登录</h4><p>使用邮件相关功能，需要一个smtp服务器，这里以<a href=https://www.sendgrid.com>SendGrid</a> 示例。</p><ol><li>在SengGrid获取Api Key<br>在<a href=https://www.sendgrid.com>SendGrid官网</a> 注册登后：</li></ol><p><img class=mx-auto alt=sendgrid src=https://raw.githubusercontent.com/lthcweb/BlogImg/main/gp/202302081415414.webp>
<img class=mx-auto alt=sendgrid src=https://raw.githubusercontent.com/lthcweb/BlogImg/main/gp/202302081415415.webp></p><p>记录好这个&rdquo;<strong>Password</strong>"，填到下面 <code>SMTP_PASSWORD</code> 字段。</p><ol start=2><li>启用邮箱设置</li></ol><ul><li>要启用任何邮箱功能，下面四个字段必须有：</li></ul><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>SMTP_HOST=smtp.sendgrid.net
</span></span><span class=line><span class=cl>SMTP_PORT=465
</span></span><span class=line><span class=cl>SMTP_TLS=true
</span></span><span class=line><span class=cl>SMTP_USERNAME=apikey
</span></span><span class=line><span class=cl>SMTP_PASSWORD=SG.9-FfVdzMSoODgml-UTenZg.OtfpYh233r3na9Ss9ii69CCChMtyqbSJfZtBN0cVI4
</span></span></code></pre></td></tr></table></div></div></div><ul><li>启用邮箱登录验证</li></ul><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>AUTH_EMAIL_ENABLE=true
</span></span><span class=line><span class=cl>AUTH_EMAIL_FROM=noreply@matteo.eu.org
</span></span><span class=line><span class=cl>AUTH_EMAIL_SUBJ=&#34;在 Matteo.eu.org 留言确认&#34;
</span></span><span class=line><span class=cl>AUTH_EMAIL_CONTENT_TYPE=&#34;text/html&#34;  
</span></span></code></pre></td></tr></table></div></div></div><ul><li>启用用户通知</li></ul><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>NOTIFY_USERS=email
</span></span><span class=line><span class=cl>NOTIFY_EMAIL_FROM=noreply@matteo.eu.org
</span></span><span class=line><span class=cl>NOTIFY_EMAIL_VERIFICATION_SUBJ=&#39;邮件确认&#39;  
</span></span></code></pre></td></tr></table></div></div></div><ul><li>启用管理员通知</li></ul><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>NOTIFY_ADMINS=email
</span></span><span class=line><span class=cl>NOTIFY_EMAIL_FROM=noreply@matteo.eu.org
</span></span><span class=line><span class=cl>ADMIN_SHARED_EMAIL=admin@matteo.eu.org
</span></span></code></pre></td></tr></table></div></div></div><h4 id=426-teletram-登录>4.2.6 Teletram 登录</h4><ol><li>获取 HTTP API<br>和<a href=https://t.me/botfather>@BotFather</a> 聊天</li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>/newbot
</span></span></code></pre></td></tr></table></div></div></div><p>输入独一无二的机器人名字，Telegram就会给出 HTTP API.</p><ol start=2><li>启用 Telegram 登录</li></ol><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>AUTH_TELEGRAM=true
</span></span></code></pre></td></tr></table></div></div></div><ol start=3><li>管理员通知</li></ol><p>创建一个频道，将上面的机器人作为管理员添加到其中，配置文件中设置频道ID。<a href=https://github.com/GabrielRF/telegram-id#web-channel-id>Telegram私有频道ID获取办法</a> ，ID是13位数字，以<code>-</code>负号开始</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>NOTIFY_ADMINS=telegram
</span></span><span class=line><span class=cl>NOTIFY_TELEGRAM_CHAN=-100**********
</span></span><span class=line><span class=cl>NOTIFY_TYPE=telegram
</span></span><span class=line><span class=cl>NOTIFY_TELEGRAM_TOKEN=62*****253:AA***********************************
</span></span></code></pre></td></tr></table></div></div></div><ol start=4><li>用户通知<br>暂时不能使用</li></ol><h2 id=五-一些高级使用技巧>五. 一些高级使用技巧</h2><h3 id=51-ssl证书自动续期>5.1 SSL证书自动续期</h3><p>申请的SSL证书有效期只有几个月，超过后就要续期。<br>上面 <a href=#2.3.1-%E7%94%B3%E8%AF%B7ssl%E8%AF%81%E4%B9%A6>申请ssl证书</a> 的安装脚本自带自动续期功能。</p><h3 id=52-实现开机自启动>5.2 实现开机自启动</h3><p>见上面 <a href=#4.1-%E5%AE%9E%E7%8E%B0%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8>实现开机自启动</a>。</p><h3 id=53-多网站共用一个remark42系统>5.3 多网站共用一个Remark42系统</h3><p>从这里得到的方法： <a href=https://github.com/umputun/remark42/discussions/950>方法来源</a></p><h4 id=531-步骤一>5.3.1 步骤一</h4><p>设置前端代码的 <code>site_id</code></p><p>网站一：</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>&lt;</span><span class=n>script</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=k>var</span> <span class=n>remark_config</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>host</span><span class=p>:</span> <span class=s1>&#39;https://remark42.sameple.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>site_id</span><span class=p>:</span> <span class=s1>&#39;mysite1&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>&lt;/</span><span class=n>script</span><span class=o>&gt;</span>
</span></span></code></pre></td></tr></table></div></div></div><p>网站二：</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>&lt;</span><span class=n>script</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=k>var</span> <span class=n>remark_config</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>host</span><span class=p>:</span> <span class=s1>&#39;https://remark42.sameple.com&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>site_id</span><span class=p>:</span> <span class=s1>&#39;mysite2&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>&lt;/</span><span class=n>script</span><span class=o>&gt;</span>
</span></span></code></pre></td></tr></table></div></div></div><h4 id=532-步骤二>5.3.2 步骤二</h4><p>服务端设置</p><ol><li><strong>网站 id 设置</strong></li></ol><ul><li>如果用命令行启动，site参数如下</li></ul><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>--site=mysite --site=mysite1 --site=mysite2
</span></span></code></pre></td></tr></table></div></div></div><ul><li>如果用环境参数启动，</li></ul><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>SITE=mysite,mysite1,mysite2
</span></span></code></pre></td></tr></table></div></div></div><ol start=2><li><strong>是否跨域设置，可能有以下组合</strong>：</li></ol><ul><li><p>不设置任何值：在安装Remark42的同一域和子域上可用。</p></li><li><p><code>ALLOWED_HOSTS</code>设置为一组域，评论仅在列出的域上显示，登录授权在任何地方都不起作用，但在安装 Remark42 的同一域及其子域上可用。<code>self</code> 表示remark所在的域名，这里为 <code>sample.com</code> 。</p></li></ul><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>ALLOWED_HOSTS=&#39;self&#39;,example1.com,example2.com
</span></span></code></pre></td></tr></table></div></div></div><ul><li><code>AUTH_SAME_SITE=None</code> : 评论显示在任何域上，登录授权可以在任何地方使用。</li></ul><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>AUTH_SAME_SITE=None
</span></span></code></pre></td></tr></table></div></div></div><ul><li><code>ALLOWED_HOSTS</code>设置为一组域，且<code>AUTH_SAME_SITE=None</code>：评论显示在列出的域上，登录授权将也适用于这些域。</li></ul><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>ALLOWED_HOSTS=&#39;self&#39;,sample1.com,example2.com
</span></span><span class=line><span class=cl>AUTH_SAME_SITE=None
</span></span></code></pre></td></tr></table></div></div></div><p>详细情况见 <a href=https://remark42.com/docs/manuals/separate-domain/>官网说明</a></p><h3 id=54-管理评论>5.4 管理评论</h3><ul><li>管理员ID在 <code>ADMIN_SHARED_ID</code> 字段设置，可以多个，用 <code>,</code> 隔开。</li></ul><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>ADMIN_SHARED_ID=github_a0698fa40eexxxxxxxxxxxx,google_0718xxxxxxxxxxxxxxxxxx
</span></span></code></pre></td></tr></table></div></div></div><ul><li><p>怎么获得ID？
在评论区登录后，点击登录的用户名，会打开个人ID，双击可以选择。</p></li><li><p>管理员在评论区登录后，可以执行管理操作，如删封黑。</p></li></ul><h3 id=55-备份和恢复>5.5 备份和恢复</h3><h4 id=551-备份数据>5.5.1 备份数据</h4><ul><li>自动备份<br>Remark42 默认在${BACKUP_PATH}(default ./var/backup) 下制作每日备份文件。备份最多${MAX_BACKUP_FILES}（默认 10）。每个备份文件都包含导出和 gzip 压缩的内容，即所有注释。</li><li>手动备份
手动备份需要设置 <code>ADMIN_PASSWD</code> 并启用 ，注意密码不能使用特殊字符。</li></ul><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  ADMIN_PASSWD=4ot8kfgahdGFHH3
</span></span></code></pre></td></tr></table></div></div></div><p>备份命令：</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>  ./remark42.linux-386 --url=https://remark42.sample.com --secret=some_secret_key_phrase_1234 backup --site=sample --admin-passwd=4ot8kfgahdGFHH3
</span></span></code></pre></td></tr></table></div></div></div><h4 id=552-恢复数据>5.5.2 恢复数据</h4><p>恢复数据需要设置 <code>ADMIN_PASSWD</code> 并启用。
恢复命令:</p><div class=highlight><div class=chroma><div class=table-container><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>./remark42.linux-386 --url=https://remark42.sample.com --secret=some_secret_key_phrase_1234 restore --file=userbackup-matteo-20230208T185724.gz --site=sample --admin-passwd=4ot8kfgahdGFHH3
</span></span></code></pre></td></tr></table></div></div></div><p>==恢复命令会删除现有的所有评论==，如要合并现在评论，看<a href=https://remark42.com/docs/backup/restore/>官网教程</a></p></div><div class=post-archive><h2>相关文章</h2><ul class=listing><li><a href=/2023/20230204205500.html>Github Pages增加discus评论系统</a></li><li><a href=/2022/20220524010406.html>Github Pages建立过程和详细教程</a></li></ul></div><div class="post-meta meta-tags"><ul class=clearfix><li><a href=/tags/blog.html target=_blank>Blog</a></li><li><a href=/tags/%E5%AE%89%E8%A3%85.html target=_blank>安装</a></li></ul></div></article><div class="post bg-white"><script src=https://utteranc.es/client.js repo=lthcweb/utterances-comments issue-term=og:title theme=github-light crossorigin=anonymous async></script></div></div><footer id=footer><div>&copy; 2025 <a href=https://matteo.eu.org/>奥国天空 By</a></div><br><div><div class=github-badge><a href=https://gohugo.io/ target=_black rel=nofollow><span class=badge-subject>Powered by</span><span class="badge-value bg-blue">Hugo</span></a></div><div class=github-badge><a href=https://www.flysnow.org/ target=_black><span class=badge-subject>Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a></div><div class=github-badge><a href=https://github.com/flysnow-org/maupassant-hugo target=_black><span class=badge-subject>Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a></div></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[["$","$"]],processEscapes:!0}}</script><script src='//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script><a id=rocket href=#top></a><script type=text/javascript src='/js/totop.js?v=0.0.0' async></script><style type=text/css>div.highlight{position:relative;margin:1em 0}.copy-code{display:none;position:absolute;top:4px;right:4px;color:rgba(255,255,255,.8);background:rgba(78,78,78,.8);border-radius:var(--radius);padding:0 5px;font:inherit;user-select:none;cursor:pointer;border:0;--radius:8px}div.highlight:hover .copy-code,pre:hover .copy-code{display:block}</style><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script>window.addEventListener("load",function(){var t,e=document.querySelector(".sidebar_container");Lightense("img:not(.no-lightense),.lightense",{beforeShow(){t=window.getComputedStyle(e).getPropertyValue("display"),e.style.display="none"},afterHide(){e.style.display=t}})},!1);function getZindex(e){var t=document.querySelector(e);return window.getComputedStyle(t).getPropertyValue("z-index")}function getDisplay(e){var t=document.querySelector(e);return window.getComputedStyle(t).getPropertyValue("display")}function getPosition(e){var t=document.querySelector(e);return window.getComputedStyle(t).getPropertyValue("position")}</script><script src=/js/lightense.min.js></script></main><aside id=sidebar_container class=sidebar_container><div id=sidebar><div class=widget><figure><img class=no-lightense src=/icons/favicon-192x192.png width=100 height=100><figcaption><h4>Matteo</h4></figcaption></figure></div><div class=widget><div class=widget-title><i class="fa fa-search">搜索</a></i></div><div class=search-form><input id=local-search-input placeholder=Search type=text name=q results=0><div id=local-search-result></div><p>文章数量: 30</p></div></div><div class=widget><div class=widget-title><i class="fa fa-folder-o"><a href=/categories.html>分类</a></i></div><ul class=tree-sections><ul><li><a href=https://matteo.eu.org/post/01net.html>①网海拾贝</a><ul><li><a href=https://matteo.eu.org/post/01net/wen.html>网络文摘</a>
<span class=category-count>(1)</span><ul></ul></li></ul></li><li><a href=https://matteo.eu.org/post/02pr.html>②编程语言</a><ul><li><a href=https://matteo.eu.org/post/02pr/cplus.html>C++</a>
<span class=category-count>(4)</span><ul></ul></li></ul></li><li><a href=https://matteo.eu.org/post/03it.html>③IT世界</a><ul><li><a href=https://matteo.eu.org/post/03it/blog.html>Blog相关</a>
<span class=category-count>(6)</span><ul></ul></li><li><a href=https://matteo.eu.org/post/03it/mark.html>Markdown</a>
<span class=category-count>(4)</span><ul></ul></li><li><a href=https://matteo.eu.org/post/03it/exp.html>奇巧经验</a>
<span class=category-count>(2)</span><ul></ul></li><li><a href=https://matteo.eu.org/post/03it/tech.html>前沿技术</a>
<span class=category-count>(1)</span><ul></ul></li></ul></li><li><a href=https://matteo.eu.org/post/04deut.html>④德语学习</a><ul><li><a href=https://matteo.eu.org/post/04deut/gram.html>语法</a>
<span class=category-count>(6)</span><ul></ul></li></ul></li><li><a href=https://matteo.eu.org/post/05life.html>⑤人生百味</a><ul><li><a href=https://matteo.eu.org/post/05life/talk.html>胡言乱语</a>
<span class=category-count>(6)</span><ul></ul></li></ul></li></ul></ul></div><div class=widget><div class=widget-title><i class="fa fa-files-o">最近文章</i></div><ul class=recent_post><li><a href=https://matteo.eu.org/2024/20241022005306.html title="在 Visual Studio Code（VSCode) 中通过 CMake 和 vcpkg 安装和使用包">在 Visual Studio Code（VSCode) 中通过 CMake 和 vcpkg 安装和使用包</a></li><li><a href=https://matteo.eu.org/2023/20230313153822.html title=C++中const的各种用法的详解>C++中const的各种用法的详解</a></li><li><a href=https://matteo.eu.org/2023/20230313020157.html title=德语中只接第三格Dativ的动词>德语中只接第三格Dativ的动词</a></li><li><a href=https://matteo.eu.org/2023/20230313011111.html title=德语中的人三物四>德语中的人三物四</a></li><li><a href=https://matteo.eu.org/2023/20230311215201.html title=古今中外时间对照表，系统详细，方便记忆查询>古今中外时间对照表，系统详细，方便记忆查询</a></li><li><a href=https://matteo.eu.org/2023/20230218191559.html title=调整美化Hugo的maupassant主题>调整美化Hugo的maupassant主题</a></li><li><a href=https://matteo.eu.org/2023/20230217181620.html title=开源C++库列表>开源C++库列表</a></li><li><a href=https://matteo.eu.org/2023/20230216233051.html title="Github 使用 rsync 同步网站到个人服务器">Github 使用 rsync 同步网站到个人服务器</a></li><li><a href=https://matteo.eu.org/2023/20230214151418.html title=情人节的起源和风行世界的原因>情人节的起源和风行世界的原因</a></li><li><a href=https://matteo.eu.org/2023/20230214001310.html title=一个直径60米的气球在18000米高空需要多少氦气？>一个直径60米的气球在18000米高空需要多少氦气？</a></li></ul></div><section class=widget><div class=widget-title><i class="fa fa-star-o">标签</i></div><div class=tagcloud><a href=https://matteo.eu.org/tags/a2.html>A2</a>
<a href=https://matteo.eu.org/tags/blog.html>Blog</a>
<a href=https://matteo.eu.org/tags/c++.html>C++</a>
<a href=https://matteo.eu.org/tags/c++%E5%9F%BA%E7%A1%80.html>C++基础</a>
<a href=https://matteo.eu.org/tags/cmake.html>CMake</a>
<a href=https://matteo.eu.org/tags/email.html>Email</a>
<a href=https://matteo.eu.org/tags/hugo.html>Hugo</a>
<a href=https://matteo.eu.org/tags/markdown.html>Markdown</a>
<a href=https://matteo.eu.org/tags/maupassant.html>Maupassant</a>
<a href=https://matteo.eu.org/tags/vcpkg.html>Vcpkg</a>
<a href=https://matteo.eu.org/tags/vscode.html>VSCode</a>
<a href=https://matteo.eu.org/tags/%E4%B8%BB%E9%A2%98.html>主题</a>
<a href=https://matteo.eu.org/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD.html>人工智能</a>
<a href=https://matteo.eu.org/tags/%E4%BB%A3%E8%AF%8D.html>代词</a>
<a href=https://matteo.eu.org/tags/%E5%86%A0%E8%AF%8D.html>冠词</a>
<a href=https://matteo.eu.org/tags/%E5%8A%A8%E8%AF%8D.html>动词</a>
<a href=https://matteo.eu.org/tags/%E5%90%8D%E8%AF%8D.html>名词</a>
<a href=https://matteo.eu.org/tags/%E5%9F%9F%E5%90%8D.html>域名</a>
<a href=https://matteo.eu.org/tags/%E5%AE%89%E8%A3%85.html>安装</a>
<a href=https://matteo.eu.org/tags/%E5%BC%80%E6%BA%90.html>开源</a>
<a href=https://matteo.eu.org/tags/%E5%BE%B7%E8%AF%AD.html>德语</a>
<a href=https://matteo.eu.org/tags/%E6%97%B6%E9%97%B4.html>时间</a>
<a href=https://matteo.eu.org/tags/%E7%83%AD%E7%82%B9.html>热点</a>
<a href=https://matteo.eu.org/tags/%E7%A7%91%E5%AD%A6.html>科学</a>
<a href=https://matteo.eu.org/tags/%E7%BE%8E%E9%A3%9F.html>美食</a>
<a href=https://matteo.eu.org/tags/%E8%8A%82%E6%97%A5.html>节日</a>
<a href=https://matteo.eu.org/tags/%E8%AF%AD%E6%B3%95.html>语法</a>
<a href=https://matteo.eu.org/tags/%E8%AF%BB%E5%90%8E%E6%84%9F.html>读后感</a></div></section><section class=widget><h3 class=widget-title>友情链接</h3><ul class=widget-list><li><a target=_blank href=https://www.flysnow.org/ title=飞雪无情的博客>飞雪无情的博客</a></li></ul></section><section class=widget><h3 class=widget-title>其它</h3><ul class=widget-list><li><a href=https://matteo.eu.org/index.xml>文章 RSS</a></li></ul></section></div></aside><div><input type=checkbox id=nav-toggle aria-hidden=true>
<label for=nav-toggle class=nav-toggle><div class=nav-toggle-inner><span></span>
<span></span>
<span></span></div></label></div></div></body><script>const sidebarToggle=document.querySelector(".nav-toggle"),sidebar=document.querySelector(".sidebar_container");sidebarToggle.addEventListener("click",()=>{sidebar.classList.toggle("show"),main.classList.toggle("blur"),sidebarToggle.classList.toggle("open")});const sidebarMarginTop=sidebar.style.marginTop,toggleTop=sidebarToggle.getBoundingClientRect().top;window.addEventListener("scroll",()=>{var e=document.documentElement.scrollTop;sidebar.style.marginTop=e+sidebarMarginTop+"px"})</script></html>